[{"sql":["CREATE TABLE \"source_videos\" (\n\t\"id\" integer PRIMARY KEY GENERATED ALWAYS AS IDENTITY (sequence name \"source_videos_id_seq\" INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START WITH 1 CACHE 1),\n\t\"signature\" text NOT NULL,\n\t\"frame_count\" integer NOT NULL,\n\t\"frame_rate\" real NOT NULL,\n\t\"orientation_degrees\" integer DEFAULT 0 NOT NULL,\n\t\"file_name\" text NOT NULL,\n\t\"size_bytes\" real NOT NULL,\n\tCONSTRAINT \"source_videos_signature_unique\" UNIQUE(\"signature\")\n);\n","\nCREATE TABLE \"video_frame_labels\" (\n\t\"id\" integer PRIMARY KEY GENERATED ALWAYS AS IDENTITY (sequence name \"video_frame_labels_id_seq\" INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START WITH 1 CACHE 1),\n\t\"video_frame_id\" integer,\n\t\"label_type\" text DEFAULT 'rectangle' NOT NULL,\n\t\"label_data\" json NOT NULL\n);\n","\nCREATE TABLE \"video_frames\" (\n\t\"id\" integer PRIMARY KEY GENERATED ALWAYS AS IDENTITY (sequence name \"video_frames_id_seq\" INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START WITH 1 CACHE 1),\n\t\"video_id\" integer,\n\t\"frame_index\" integer NOT NULL\n);\n","\nALTER TABLE \"video_frame_labels\" ADD CONSTRAINT \"video_frame_labels_video_frame_id_video_frames_id_fk\" FOREIGN KEY (\"video_frame_id\") REFERENCES \"public\".\"video_frames\"(\"id\") ON DELETE no action ON UPDATE no action;","\nALTER TABLE \"video_frames\" ADD CONSTRAINT \"video_frames_video_id_source_videos_id_fk\" FOREIGN KEY (\"video_id\") REFERENCES \"public\".\"source_videos\"(\"id\") ON DELETE no action ON UPDATE no action;"],"bps":true,"folderMillis":1737254363988,"hash":"657cf71f886f8a1cfd2699f0c4051b49fee5344ba32d915b4a88c5dc4c0f9660"},{"sql":["CREATE INDEX \"video_frame_idx\" ON \"video_frames\" USING btree (\"video_id\",\"frame_index\");"],"bps":true,"folderMillis":1746033971321,"hash":"fb892867a9cefdd762c9048452c6a82e2a1404d791133db9ed0edbbbe5e81d55"},{"sql":["ALTER TABLE \"video_frame_labels\" DROP CONSTRAINT \"video_frame_labels_video_frame_id_video_frames_id_fk\";\n","\nALTER TABLE \"video_frames\" DROP CONSTRAINT \"video_frames_video_id_source_videos_id_fk\";\n","\nDROP INDEX \"video_frame_idx\";","\nALTER TABLE \"source_videos\" ALTER COLUMN \"size_bytes\" SET DATA TYPE bigint;","\nALTER TABLE \"video_frame_labels\" ALTER COLUMN \"video_frame_id\" SET NOT NULL;","\nALTER TABLE \"video_frames\" ALTER COLUMN \"video_id\" SET NOT NULL;","\nALTER TABLE \"video_frame_labels\" ADD COLUMN \"modified_at\" timestamp DEFAULT now() NOT NULL;","\nALTER TABLE \"video_frame_labels\" ADD COLUMN \"deleted_at\" timestamp;","\nALTER TABLE \"video_frame_labels\" ADD CONSTRAINT \"video_frame_labels_video_frame_id_video_frames_id_fk\" FOREIGN KEY (\"video_frame_id\") REFERENCES \"public\".\"video_frames\"(\"id\") ON DELETE cascade ON UPDATE no action;","\nALTER TABLE \"video_frames\" ADD CONSTRAINT \"video_frames_video_id_source_videos_id_fk\" FOREIGN KEY (\"video_id\") REFERENCES \"public\".\"source_videos\"(\"id\") ON DELETE cascade ON UPDATE no action;","\nCREATE INDEX \"idx_video_frame_label_video_frame\" ON \"video_frame_labels\" USING btree (\"video_frame_id\");","\nCREATE INDEX \"idx_video_frame_labels_deleted_at\" ON \"video_frame_labels\" USING btree (\"deleted_at\");","\nALTER TABLE \"video_frames\" ADD CONSTRAINT \"unq_video_frame\" UNIQUE(\"video_id\",\"frame_index\");","\nALTER TABLE \"source_videos\" ADD CONSTRAINT \"orientation_degrees_validity\" CHECK (\"source_videos\".\"orientation_degrees\" IN (0, 90, 180, 270));"],"bps":true,"folderMillis":1752679441214,"hash":"94d8bd92e5a94dbeb2c6f5724e49370eb14eb9899df44087f7200c90455e5b65"}]